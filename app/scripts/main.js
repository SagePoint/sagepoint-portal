!function(){Ember.FEATURES["query-params"]=!0;var a=window.SagepointPortal=Ember.Application.create({LOG_TRANSITIONS:!0});a.api_base="//api.alpha.sagepointsoftware.com",a.api_version="api/v1",a.legacy_sign_in="//alpha.sagepointsoftware.com/account/login",a.legacy_dashboard="//alpha.sagepointsoftware.com/ep/list"}(),function(){SagepointPortal.PasswordController=Ember.ObjectController.extend({token:function(){return this.get("model.reset_password_token")}.property("model.reset_password_token"),actions:{update:function(){var a=this.get("reset_password_token"),b=this.get("password"),c=$("#match").val();return console.log("Host: "+SagepointPortal.api_base+"/"+SagepointPortal.api_version),b!==c?($.notifyBar({html:"Oops, your passwords don't match",cssClass:"error"}),void 0):($.ajax({type:"PUT",url:SagepointPortal.api_base+"/"+SagepointPortal.api_version+"/users/password",data:{password:b,password_confirmation:c,reset_password_token:a},crossDomain:!0,success:function(a){a.success===!0?($.notifyBar({html:"Password Changed!",cssClass:"success"}),setTimeout(function(){location.href=SagepointPortal.legacy_sign_in},500)):$.notifyBar({html:"Oops, there was an error!",cssClass:"error"})},error:function(){$.notifyBar({html:"Oops, there was an error",cssClass:"error"})},dataType:"json"}),void 0)}}})}(),function(){SagepointPortal.UsersLoginController=Ember.ObjectController.extend({actions:{login:function(){var a=this.get("email"),b=this.get("password");console.log("Host: "+SagepointPortal.api_base+"/"+SagepointPortal.api_version),$.ajax({type:"POST",url:SagepointPortal.api_base+"/"+SagepointPortal.api_version+"/users/sign_in",data:{password:b,email:a},success:function(b){b.success===!0?($.cookie("auth_token",b.token),$.cookie("email",a),$("#auth_token").val(b.token),$(".form-signin").attr("action",SagepointPortal.legacy_sign_in).submit()):$.notifyBar({html:b.errors[0],cssClass:"error"})},error:function(a){jQuery.notifyBar({html:JSON.parse(a.responseText).errors[0],cssClass:"error"})},dataType:"json"})}}})}(),function(){SagepointPortal.Store=DS.Store.extend(),SagepointPortal.ApplicationAdapter=DS.FixtureAdapter,SagepointPortal.RESTAdapter=DS.RESTAdapter,SagepointPortal.RESTAdapter.reopen({host:SagepointPortal.api_base,namespace:SagepointPortal.api_version})}(),function(){SagepointPortal.ApplicationRoute=Ember.Route.extend({})}(),function(){SagepointPortal.PasswordRoute=Ember.Route.extend({model:function(a,b){return b}})}(),function(){SagepointPortal.UsersLoginRoute=Ember.Route.extend({model:function(){return{email:null,password:null}}})}(),function(){SagepointPortal.Router.map(function(){this.resource("users",function(){this.resource("password",{queryParams:["reset_password_token"]},function(){this.route("edit")}),this.route("login")})})}(),function(){$(document).ready(function(){setTimeout(function(){$.notifyBar({html:"Welcome to the new SagePoint! As we transition, you will see some functionality in this format. Change is good =)",close:!0,closeOnClick:!1,delay:1e6,cssClass:"warning",animationSpeed:"normal",position:"bottom"})},2e3)})}();